import{h as W,u as X,i as T,j as Z,y as ee,t as se,r as ae,k as L,l as k,m as a,n as le,w as te,p as _e,R as A,q as ie,v as re,x as ue,z as oe,A as ne,B as I,D as $,E as ce,F as me,G as he,H as ve,J as ge,K as de,L as pe,M as ye,N as M,O as fe,Q as H}from"./app-Bihdn80o.js";const be=["/","/en_attente.html","/sale/bases_risottos.html","/sale/accras_de_courgette_a_l_avoine_et_au_curry.html","/sale/aubergines_en_escabeche.html","/sale/aubergines_farcies_a_l_indienne.html","/sale/aubergines_roties_au_miso.html","/sale/avocado_toast_aux_poivrons_confits.html","/sale/bearnaise.html","/sale/blinis.html","/sale/boulettes_aubergines_veganes.html","/sale/boulettes_de_carottes_sauce_au_yaourt.html","/sale/boulettes_de_lentilles_a_l_indienne.html","/sale/boulettes_de_petits_pois_a_l_origan.html","/sale/boulettes_lentilles_indienne.html","/sale/burger_au_tofu.html","/sale/burger_au_tofu_(amandes_noisette_sesame).html","/sale/burger_au_tofu_(tomate_avoine_champignons).html","/sale/burger_au_tofu_et_epices_(marinade).html","/sale/burger_haricots_rouge_quinoa.html","/sale/burger_ou_pate_de_lentilles_champignons_et_olives_noires.html","/sale/burrito_bowl_vegan.html","/sale/choux_de_bruxelles_poelees_a_l_erable_et_au_balsamique.html","/sale/courgettes_farcies.html","/sale/courgettes_farcies_a_la_semoule.html","/sale/courgettes_rondes_farcies.html","/sale/creme_d_aubergines_au_paprika.html","/sale/criques_(patates).html","/sale/crouton_a_l'ail.html","/sale/dahl_de_pois_casses.html","/sale/endives_braisees_a_la_gremolata_de_noix.html","/sale/falafels_express.html","/sale/flans_de_blettes_a_la_moutarde.html","/sale/fleurs_de_legumes.html","/sale/floutes.html","/sale/galettes_quinoa_et_brocolis.html","/sale/gateau_butternut_noisette.html","/sale/gaufres_de_patates.html","/sale/gnocchis.html","/sale/gnocchis_aux_navets_caramelises.html","/sale/gnocchis_butternut.html","/sale/gratin_aubergines_vegan.html","/sale/gratin_de_courgettes_au_mascarpone.html","/sale/gratin_de_patates_douces_a_la_ricotta.html","/sale/lasagnes_aubergines_veganes.html","/sale/lasagnes_aubergines_vegetariennes.html","/sale/lasagnes_aux_epinards.html","/sale/lasagnes_courge_iron_cup.html","/sale/lasagnes_poireaux_epinard_fromage.html","/sale/lasagnes_veganes_(tomate_carotte_petits_pois_soja_texture).html","/sale/legumes_grilles_d_hiver_aux_noisettes_sauce_a_l_orange.html","/sale/lentilles_corails_au_curry.html","/sale/lentilles_de_haricots_mungo_aneth.html","/sale/minis_pains_a_la_nigel.html","/sale/mung_massala_-_haricots_mungo_epices.html","/sale/oeuf_cocotte_mouillettes_de_pain_d_epices_et_salade_de_champignons_poeles.html","/sale/olah_olah_%E2%80%93_legumes_au_lait_de_coco.html","/sale/paella_vegetarienne_aux_courgettes_et_pois_chiches.html","/sale/pate_a_tarte.html","/sale/pates_a_l_ail.html","/sale/pates_soba_au_tofu_fume_et_petits_navets.html","/sale/patidous_farcis_lentilles-coco-curry.html","/sale/pelmenis.html","/sale/pesto_de_brocoli_(vegan).html","/sale/pierojki.html","/sale/pizz_aubergines.html","/sale/poilee_pois_casses_et_poireaux_au_miso.html","/sale/poivrons_farcis_noix_et_epices.html","/sale/polenta_cremeuse_au_parmesan_asperges_grillees_et_burrata.html","/sale/polenta_cremeuse_champignons.html","/sale/puree_butternut_au_curry.html","/sale/ramen_vegetarien_express.html","/sale/ramen_veggie.html","/sale/rillettes_aux_deux_haricots.html","/sale/risotto_a_la_butternut_grillee.html","/sale/risotto_basilic_citron.html","/sale/risotto_gorgonzola_petits_pois.html","/sale/risotto_gorgonzola_poires.html","/sale/riz_aux_haricots_et_banane_plantain_grillee.html","/sale/riz_saute_a_l_indienne.html","/sale/riz_saute_thai_a_l_ananas.html","/sale/rouleaux_de_printemps_vege_sauce_a_la_mangue.html","/sale/salade_de_chou_chinois.html","/sale/salade_de_haricots_verts_a_la_noix_de_coco_et_son_cloud_egg.html","/sale/salade_de_lentilles_corail_sauce_au_curry_miel_et_citron.html","/sale/salade_de_patates_douces_vinaigrette_miso.html","/sale/salade_tiede_d_aubergines_roties_vinaigrette_miso.html","/sale/sauce_brocolis_(accompagnement).html","/sale/shakshouka_vegetal.html","/sale/soba_au_tofu_saute_miel_orange.html","/sale/soupe_butternut_lentilles_corail_epices.html","/sale/soupe_de_brocolis_au_riz.html","/sale/soupe_potimarron_lentilles_corail.html","/sale/steak_de_lentilles.html","/sale/steak_vege_haricots_noirs.html","/sale/steaks_vege_haricots_rouges_quinoa_et_champignons.html","/sale/steaks_vegetariens_(carottes__avoine__sauce_soja).html","/sale/steaks_vegetariens_(legumes_champignons).html","/sale/tajine_d_aubergines_aux_abricots.html","/sale/tajine_de_pois_chiches_navets_boule_d_or_et_raisins_secs.html","/sale/tarte_fine_au_fenouil.html","/sale/tartinade_haricots_rouges.html","/sale/veloute_de_brocolis.html","/sale/veloute_de_pois_casses_a_la_suedoises.html","/sale/veloute_poireaux_pommes_de_terre_topinambours.html","/sucre/brownie_vegan_au_tofu_soyeux.html","/sucre/cake_lentille_corail_epices_ecorces_de_citron.html","/sucre/cake_marbre_matcha_et_sesame_noir.html","/sucre/cheesecake.html","/sucre/cookies.html","/sucre/cookies_raisins-cannelle.html","/sucre/cookies_vegans.html","/sucre/cookies_vegans_et_sans_gluten.html","/sucre/financiers.html","/sucre/gateau_au_chocolat.html","/sucre/gateau_au_chocolat_(vegan).html","/sucre/gateau_au_chocolat_-_Myrtee_(vegan).html","/sucre/gateau_aux_epices.html","/sucre/layer_cake_citron-fraise.html","/sucre/mousse_au_chocolat_vegane.html","/sucre/mousseux_au_chocolat.html","/sucre/muffins-myrtille-citron.html","/sucre/muffins_(vegans).html","/sucre/muffins_au_chocolat.html","/sucre/muffins_aux_pepites_de_chocolat.html","/sucre/muffins_groseilles_-_avoine_-_tofu_soyeux.html","/sucre/muffins_vegan_-_pommes_et_graines_de_pavot.html","/sucre/pancakes_(vegan).html","/sucre/porridge.html","/sucre/tarte_abricot_framboise.html","/sucre/tarte_aux_framboises.html","/404.html"],xe="SLIMSEARCH_QUERY_HISTORY",d=M(xe,[]),ke=()=>{const{queryHistoryCount:t}=H;return{enabled:t>0,queryHistories:d,addQueryHistory:r=>{d.value=Array.from(new Set([r,...d.value.slice(0,t-1)]))},removeQueryHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}},j=t=>be[t.id]+("anchor"in t?`#${t.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:F}=H,p=M(He,[]),qe=()=>({enabled:F>0,resultHistories:p,addResultHistory:i=>{{const r={link:j(i),display:i.display};"header"in i&&(r.header=i.header),p.value=[r,...p.value.slice(0,F-1)]}},removeResultHistory:i=>{p.value=[...p.value.slice(0,i),...p.value.slice(i+1)]}}),Re=t=>{const i=ce(),r=T(),q=me(),u=L(0),y=k(()=>u.value>0),c=he([]);return ve(()=>{const{search:R,terminate:h}=ge(),f=pe(v=>{const{resultsFilter:w=l=>l,querySplitter:g,suggestionsFilter:D,..._}=i.value;v?(u.value+=1,R(v,r.value,_).then(l=>w(l,v,r.value,q.value)).then(l=>{u.value-=1,c.value=l}).catch(l=>{console.warn(l),u.value-=1,u.value||(c.value=[])})):c.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});de([t,r],([v])=>f(v.join(" "))),ye(()=>{h()})}),{isSearching:y,results:c}};var Qe=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:i}){const r=X(),q=T(),u=Z(ee),{addQueryHistory:y,queryHistories:c,removeQueryHistory:R}=ke(),{resultHistories:h,addResultHistory:f,removeResultHistory:v}=qe(),w=se(t,"queries"),{results:g,isSearching:D}=Re(w),_=ae({isQuery:!0,index:0}),l=L(0),m=L(0),z=k(()=>c.value.length>0||h.value.length>0),Q=k(()=>g.value.length>0),S=k(()=>g.value[l.value]||null),O=()=>{const{isQuery:e,index:s}=_;s===0?(_.isQuery=!e,_.index=e?h.value.length-1:c.value.length-1):_.index=s-1},P=()=>{const{isQuery:e,index:s}=_;s===(e?c.value.length-1:h.value.length-1)?(_.isQuery=!e,_.index=0):_.index=s+1},U=()=>{l.value=l.value>0?l.value-1:g.value.length-1,m.value=S.value.contents.length-1},Y=()=>{l.value=l.value<g.value.length-1?l.value+1:0,m.value=0},B=()=>{m.value<S.value.contents.length-1?m.value+=1:Y()},G=()=>{m.value>0?m.value-=1:U()},C=e=>e.map(s=>fe(s)?s:a(s[0],s[1])),J=e=>{if(e.type==="customField"){const s=oe[e.index]||"$content",[o,x=""]=ne(s)?s[q.value].split("$content"):s.split("$content");return e.display.map(n=>a("div",C([o,...n,x])))}return e.display.map(s=>a("div",C(s)))},b=()=>{l.value=0,m.value=0,i("updateQuery",""),i("close")},K=()=>a("ul",{class:"slimsearch-result-list"},a("li",{class:"slimsearch-result-list-item"},[a("div",{class:"slimsearch-result-title"},u.value.queryHistory),c.value.map((e,s)=>a("div",{class:["slimsearch-result-item",{active:_.isQuery&&_.index===s}],onClick:()=>{i("updateQuery",e)}},[a(I,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},e),a("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),R(s)}})]))])),N=()=>a("ul",{class:"slimsearch-result-list"},a("li",{class:"slimsearch-result-list-item"},[a("div",{class:"slimsearch-result-title"},u.value.resultHistory),h.value.map((e,s)=>a(A,{to:e.link,class:["slimsearch-result-item",{active:!_.isQuery&&_.index===s}],onClick:()=>{b()}},()=>[a(I,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(o=>C(o)).flat())]),a("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),v(s)}})]))]));return le("keydown",e=>{if(t.isFocusing){if(Q.value){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")B();else if(e.key==="Enter"){const s=S.value.contents[m.value];y(t.queries.join(" ")),f(s),r.push(j(s)),b()}}else if(e.key==="ArrowUp")O();else if(e.key==="ArrowDown")P();else if(e.key==="Enter"){const{index:s}=_;_.isQuery?(i("updateQuery",c.value[s]),e.preventDefault()):(r.push(h.value[s].link),b())}}}),te([l,m],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["slimsearch-result-wrapper",{empty:t.queries.length?!Q.value:!z.value}],id:"slimsearch-results"},t.queries.length?D.value?a(_e,{hint:u.value.searching}):Q.value?a("ul",{class:"slimsearch-result-list"},g.value.map(({title:e,contents:s},o)=>{const x=l.value===o;return a("li",{class:["slimsearch-result-list-item",{active:x}]},[a("div",{class:"slimsearch-result-title"},e||u.value.defaultTitle),s.map((n,V)=>{const E=x&&m.value===V;return a(A,{to:j(n),class:["slimsearch-result-item",{active:E,"aria-selected":E}],onClick:()=>{y(t.queries.join(" ")),f(n),b()}},()=>[n.type==="text"?null:a(n.type==="title"?ie:n.type==="heading"?re:ue,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},[n.type==="text"&&n.header?a("div",{class:"content-header"},n.header):null,a("div",J(n))])])})])})):u.value.emptyResult:z.value?[K(),N()]:u.value.emptyHistory)}});export{Qe as default};
