import{d as N,u as X,e as T,f as Z,j as ee,t as ae,r as se,g as L,h as k,i as e,k as le,w as te,s as _e,R as $,l as re,n as ie,m as oe,p as ue,q as ne,v as A,x as F,y as ce,z as me,A as he,B as de,L as ve,C as ge,D as pe,E as ye,F as M,G as be,H}from"./app-Apqyg0rn.js";const fe=["/","/en_attente.html","/sucre/brownie_vegan_au_tofu_soyeux.html","/sucre/cake_lentille_corail_epices_ecorces_de_citron.html","/sucre/cake_marbre_matcha_et_sesame_noir.html","/sucre/cheesecake.html","/sucre/cookies.html","/sucre/cookies_raisins-cannelle.html","/sucre/cookies_vegans.html","/sucre/cookies_vegans_et_sans_gluten.html","/sucre/financiers.html","/sucre/gateau_au_chocolat.html","/sucre/gateau_au_chocolat_(vegan).html","/sucre/gateau_au_chocolat_-_Myrtee_(vegan).html","/sucre/gateau_aux_epices.html","/sucre/layer_cake_citron-fraise.html","/sucre/mousse_au_chocolat_vegane.html","/sucre/mousseux_au_chocolat.html","/sucre/muffins-myrtille-citron.html","/sucre/muffins_(vegans).html","/sucre/muffins_au_chocolat.html","/sucre/muffins_aux_pepites_de_chocolat.html","/sucre/muffins_groseilles_-_avoine_-_tofu_soyeux.html","/sucre/muffins_vegan_-_pommes_et_graines_de_pavot.html","/sucre/pancakes_(vegan).html","/sucre/porridge.html","/sucre/tarte_abricot_framboise.html","/sucre/tarte_aux_framboises.html","/sale/bases_risottos.html","/sale/accras_de_courgette_a_l_avoine_et_au_curry.html","/sale/aubergines_en_escabeche.html","/sale/aubergines_farcies_a_l_indienne.html","/sale/aubergines_roties_au_miso.html","/sale/avocado_toast_aux_poivrons_confits.html","/sale/bearnaise.html","/sale/blinis.html","/sale/boulettes_aubergines_veganes.html","/sale/boulettes_de_carottes_sauce_au_yaourt.html","/sale/boulettes_de_lentilles_a_l_indienne.html","/sale/boulettes_de_petits_pois_a_l_origan.html","/sale/boulettes_lentilles_indienne.html","/sale/burger_au_tofu.html","/sale/burger_au_tofu_(amandes_noisette_sesame).html","/sale/burger_au_tofu_(tomate_avoine_champignons).html","/sale/burger_au_tofu_et_epices_(marinade).html","/sale/burger_haricots_rouge_quinoa.html","/sale/burger_ou_pate_de_lentilles_champignons_et_olives_noires.html","/sale/burrito_bowl_vegan.html","/sale/choux_de_bruxelles_poelees_a_l_erable_et_au_balsamique.html","/sale/courgettes_farcies.html","/sale/courgettes_farcies_a_la_semoule.html","/sale/courgettes_rondes_farcies.html","/sale/creme_d_aubergines_au_paprika.html","/sale/criques_(patates).html","/sale/crouton_a_l'ail.html","/sale/dahl_de_pois_casses.html","/sale/endives_braisees_a_la_gremolata_de_noix.html","/sale/falafels_express.html","/sale/flans_de_blettes_a_la_moutarde.html","/sale/fleurs_de_legumes.html","/sale/floutes.html","/sale/galettes_quinoa_et_brocolis.html","/sale/gateau_butternut_noisette.html","/sale/gaufres_de_patates.html","/sale/gnocchis.html","/sale/gnocchis_aux_navets_caramelises.html","/sale/gnocchis_butternut.html","/sale/gratin_aubergines_vegan.html","/sale/gratin_de_courgettes_au_mascarpone.html","/sale/gratin_de_patates_douces_a_la_ricotta.html","/sale/lasagnes_aubergines_veganes.html","/sale/lasagnes_aubergines_vegetariennes.html","/sale/lasagnes_aux_epinards.html","/sale/lasagnes_courge_iron_cup.html","/sale/lasagnes_poireaux_epinard_fromage.html","/sale/lasagnes_veganes_(tomate_carotte_petits_pois_soja_texture).html","/sale/legumes_grilles_d_hiver_aux_noisettes_sauce_a_l_orange.html","/sale/lentilles_corails_au_curry.html","/sale/lentilles_de_haricots_mungo_aneth.html","/sale/minis_pains_a_la_nigel.html","/sale/mung_massala_-_haricots_mungo_epices.html","/sale/oeuf_cocotte_mouillettes_de_pain_d_epices_et_salade_de_champignons_poeles.html","/sale/olah_olah_%E2%80%93_legumes_au_lait_de_coco.html","/sale/paella_vegetarienne_aux_courgettes_et_pois_chiches.html","/sale/pate_a_tarte.html","/sale/pates_a_l_ail.html","/sale/pates_soba_au_tofu_fume_et_petits_navets.html","/sale/patidous_farcis_lentilles-coco-curry.html","/sale/pelmenis.html","/sale/pesto_de_brocoli_(vegan).html","/sale/pierojki.html","/sale/pizz_aubergines.html","/sale/poilee_pois_casses_et_poireaux_au_miso.html","/sale/poivrons_farcis_noix_et_epices.html","/sale/polenta_cremeuse_au_parmesan_asperges_grillees_et_burrata.html","/sale/polenta_cremeuse_champignons.html","/sale/puree_butternut_au_curry.html","/sale/ramen_vegetarien_express.html","/sale/ramen_veggie.html","/sale/rillettes_aux_deux_haricots.html","/sale/risotto_a_la_butternut_grillee.html","/sale/risotto_basilic_citron.html","/sale/risotto_gorgonzola_petits_pois.html","/sale/risotto_gorgonzola_poires.html","/sale/riz_aux_haricots_et_banane_plantain_grillee.html","/sale/riz_saute_a_l_indienne.html","/sale/riz_saute_thai_a_l_ananas.html","/sale/rouleaux_de_printemps_vege_sauce_a_la_mangue.html","/sale/salade_de_chou_chinois.html","/sale/salade_de_haricots_verts_a_la_noix_de_coco_et_son_cloud_egg.html","/sale/salade_de_lentilles_corail_sauce_au_curry_miel_et_citron.html","/sale/salade_de_patates_douces_vinaigrette_miso.html","/sale/salade_tiede_d_aubergines_roties_vinaigrette_miso.html","/sale/sauce_brocolis_(accompagnement).html","/sale/shakshouka_vegetal.html","/sale/soba_au_tofu_saute_miel_orange.html","/sale/soupe_butternut_lentilles_corail_epices.html","/sale/soupe_de_brocolis_au_riz.html","/sale/soupe_potimarron_lentilles_corail.html","/sale/steak_de_lentilles.html","/sale/steak_vege_haricots_noirs.html","/sale/steaks_vege_haricots_rouges_quinoa_et_champignons.html","/sale/steaks_vegetariens_(carottes__avoine__sauce_soja).html","/sale/steaks_vegetariens_(legumes_champignons).html","/sale/tajine_d_aubergines_aux_abricots.html","/sale/tajine_de_pois_chiches_navets_boule_d_or_et_raisins_secs.html","/sale/tarte_fine_au_fenouil.html","/sale/tartinade_haricots_rouges.html","/sale/veloute_de_brocolis.html","/sale/veloute_de_pois_casses_a_la_suedoises.html","/sale/veloute_poireaux_pommes_de_terre_topinambours.html","/404.html"],xe="SLIMSEARCH_QUERY_HISTORY",p=M(xe,[]),ke=()=>{const{queryHistoryCount:t}=H;return{enabled:t>0,queryHistories:p,addQueryHistory:o=>{p.value=Array.from(new Set([o,...p.value.slice(0,t-1)]))},removeQueryHistory:o=>{p.value=[...p.value.slice(0,o),...p.value.slice(o+1)]}}},D=t=>fe[t.id]+("anchor"in t?`#${t.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=H,y=M(He,[]),qe=()=>({enabled:I>0,resultHistories:y,addResultHistory:i=>{{const o={link:D(i),display:i.display};"header"in i&&(o.header=i.header),y.value=[o,...y.value.slice(0,I-1)]}},removeResultHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}),we=t=>{const i=ce(),o=T(),q=me(),_=L(0),b=k(()=>_.value>0),c=he([]);return de(()=>{const{search:w,terminate:d}=ve(),f=pe(v=>{const{resultsFilter:Q=l=>l,querySplitter:g,suggestionsFilter:j,...r}=i.value;v?(_.value+=1,w(v,o.value,r).then(l=>Q(l,v,o.value,q.value)).then(l=>{_.value-=1,c.value=l}).catch(l=>{console.warn(l),_.value-=1,_.value||(c.value=[])})):c.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ge([t,o],([v])=>f(v.join(" "))),ye(()=>{d()})}),{isSearching:b,results:c}};var Re=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:i}){const o=X(),q=T(),_=Z(ee),{addQueryHistory:b,queryHistories:c,removeQueryHistory:w}=ke(),{resultHistories:d,addResultHistory:f,removeResultHistory:v}=qe(),Q=ae(t,"queries"),{results:g,isSearching:j}=we(Q),r=se({isQuery:!0,index:0}),l=L(0),m=L(0),z=k(()=>c.value.length>0||d.value.length>0),R=k(()=>g.value.length>0),S=k(()=>g.value[l.value]||null),U=()=>{const{isQuery:a,index:s}=r;s===0?(r.isQuery=!a,r.index=a?d.value.length-1:c.value.length-1):r.index=s-1},O=()=>{const{isQuery:a,index:s}=r;s===(a?c.value.length-1:d.value.length-1)?(r.isQuery=!a,r.index=0):r.index=s+1},P=()=>{l.value=l.value>0?l.value-1:g.value.length-1,m.value=S.value.contents.length-1},Y=()=>{l.value=l.value<g.value.length-1?l.value+1:0,m.value=0},B=()=>{m.value<S.value.contents.length-1?m.value+=1:Y()},G=()=>{m.value>0?m.value-=1:P()},C=a=>a.map(s=>be(s)?s:e(s[0],s[1])),V=a=>{if(a.type==="customField"){const s=ue[a.index]||"$content",[h,u=""]=ne(s)?s[q.value].split("$content"):s.split("$content");return a.display.map(n=>e("div",C([h,...n,u])))}return a.display.map(s=>e("div",C(s)))},x=()=>{l.value=0,m.value=0,i("updateQuery",""),i("close")},W=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},_.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},c.value.map((a,s)=>{const h=r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{i("updateQuery",a)}},e("div",[e(A,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:_.value.remove,"aria-label":_.value.remove,innerHTML:F,onClick:u=>{u.preventDefault(),u.stopPropagation(),w(s)}})]))}))])),J=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},_.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((a,s)=>{const h=!r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e($,{to:a.link,onClick:()=>{x()}},()=>[e(A,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(u=>C(u)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:_.value.remove,"aria-label":_.value.remove,innerHTML:F,onClick:u=>{u.preventDefault(),u.stopPropagation(),v(s)}})]))}))]));return le("keydown",a=>{if(t.isFocusing){if(R.value){if(a.key==="ArrowUp")G();else if(a.key==="ArrowDown")B();else if(a.key==="Enter"){const s=S.value.contents[m.value];b(t.queries.join(" ")),f(s),o.push(D(s)),x()}}else if(a.key==="ArrowUp")U();else if(a.key==="ArrowDown")O();else if(a.key==="Enter"){const{index:s}=r;r.isQuery?(a.preventDefault(),i("updateQuery",c.value[s])):(o.push(d.value[s].link),x())}}}),te([l,m],()=>{var a;(a=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:t.queries.length?!R.value:!z.value}]},t.queries.length?j.value?e(_e,{hint:_.value.searching}):R.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},g.value.map(({title:a,contents:s},h)=>{const u=l.value===h;return e("div",{class:["slimsearch-record",{active:u}],role:"group","aria-selected":u},[e("div",{class:"slimsearch-record-title"},a||_.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((n,K)=>{const E=u&&m.value===K;return e("li",{class:["slimsearch-record-matches",{active:E}],role:"option","aria-selected":E},e($,{to:D(n),onClick:()=>{b(t.queries.join(" ")),f(n),x()}},()=>[n.type==="text"?null:e(n.type==="title"?re:n.type==="heading"?ie:oe,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[n.type==="text"&&n.header?e("div",{class:"slimsearch-record-content-header"},n.header):null,e("div",V(n))])]))}))])})):_.value.emptyResult:z.value?[W(),J()]:_.value.emptyHistory)}});export{Re as default};
